<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mundo do Jeans - PDV</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
</head>
<body>

    <div id="loading" class="hidden">
        <div class="spinner">‚è≥</div>
        <p>Processando...</p>
    </div>

    <section id="login-screen">
        <div class="login-container">
            <h1 class="gold">MUNDO DO JEANS</h1>
            <div id="login-form">
                <input type="text" id="login-user" placeholder="Nome de Usu√°rio">
                <input type="password" id="login-pass" placeholder="Senha">
                <button onclick="fazerLogin()">Entrar</button>
                <p class="switch-msg">N√£o tem conta? <span onclick="toggleLogin('signup')">Crie uma!</span></p>
            </div>

            <div id="signup-form" class="hidden">
                <input type="text" id="sign-user" placeholder="Usu√°rio">
                <input type="password" id="sign-pass" placeholder="Senha">
                <input type="text" id="sign-name" placeholder="Nome Completo">
                <input type="text" id="sign-cpf" placeholder="CPF">
                <input type="text" id="sign-phone" placeholder="Telefone">
                <button onclick="criarConta()">Cadastrar</button>
                <p class="switch-msg">J√° tem conta? <span onclick="toggleLogin('login')">Fa√ßa Login</span></p>
            </div>
        </div>
    </section>

    <section id="app-screen" class="hidden">
        
        <nav class="sidebar">
            <h2 class="gold">PDV JEANS</h2>
            <div id="welcome-msg">Ol√°, Usu√°rio</div>
            <ul>
                <li onclick="showView('dashboard')"><i class="fas fa-chart-line"></i> Dashboard</li>
                <li onclick="showView('vender')"><i class="fas fa-shopping-cart"></i> Vender Agora</li>
                <li onclick="showView('estoque')"><i class="fas fa-boxes"></i> Estoque</li>
                <li onclick="showView('ponto')"><i class="fas fa-clock"></i> Ponto</li>
                <li onclick="showView('loja')"><i class="fas fa-store"></i> Minha Loja</li>
                <li onclick="logout()" style="margin-top:auto; color: red;"><i class="fas fa-sign-out-alt"></i> Sair</li>
            </ul>
        </nav>

        <main class="content">
            
            <div id="view-dashboard" class="view active">
                <div class="header-flex">
                    <h1>Dashboard</h1>
                    <button onclick="exportarRelatorioPDF()" class="btn-gold"><i class="fas fa-file-pdf"></i> Exportar Dados</button>
                </div>
                
                <div class="kpi-grid">
                    <div class="card"><h3>Vendas Hoje</h3><p id="kpi-today">R$ 0,00</p></div>
                    <div class="card"><h3>Vendas M√™s</h3><p id="kpi-month">R$ 0,00</p></div>
                    <div class="card"><h3>Vendas Ano</h3><p id="kpi-year">R$ 0,00</p></div>
                    <div class="card gold-border"><h3>Lucro L√≠quido (M√™s)</h3><p id="kpi-profit">R$ 0,00</p></div>
                </div>

                <div class="insights-grid">
                    <div class="card">
                        <h3>üèÜ Top Vendedor (M√™s)</h3>
                        <p id="top-seller">---</p>
                    </div>
                    <div class="card full-width">
                        <h3>üìà Top 10 Produtos (M√™s)</h3>
                        <ul id="top-products-list"></ul>
                    </div>
                </div>
            </div>

            <div id="view-vender" class="view">
                <div class="pos-layout">
                    <div class="product-selection">
                        <div class="header-flex">
                            <h1>Cat√°logo</h1>
                            <button class="btn-outline" onclick="abrirMinhasVendas()">Minhas Vendas</button>
                        </div>
                        <input type="text" id="search-pos" placeholder="Pesquisar produto..." onkeyup="filtrarProdutosPOS()">
                        <div id="pos-product-list" class="grid-products">
                            </div>
                    </div>
                    <div class="cart-panel">
                        <h2>Carrinho üõí</h2>
                        <div id="cart-items"></div>
                        <div class="cart-total">Total: <span id="cart-total-value">R$ 0,00</span></div>
                        
                        <div class="payment-options">
                            <label>Pagamento:</label>
                            <select id="pay-method" onchange="checkPaymentMethod()">
                                <option value="Dinheiro">Dinheiro</option>
                                <option value="Pix">Pix</option>
                                <option value="D√©bito">D√©bito</option>
                                <option value="Cr√©dito">Cr√©dito</option>
                                <option value="Credi√°rio">Credi√°rio</option>
                            </select>
                            
                            <div id="credit-details" class="hidden">
                                <input type="number" id="installments" placeholder="N¬∫ Parcelas" min="1">
                            </div>
                            <div id="crediario-details" class="hidden">
                                <input type="text" id="client-cpf" placeholder="CPF do Cliente">
                                <input type="text" id="client-phone" placeholder="Telefone">
                            </div>
                        </div>
                        <button class="btn-gold full" onclick="finalizarVenda()">FINALIZAR VENDA</button>
                    </div>
                </div>
            </div>

            <div id="view-estoque" class="view">
                <div class="header-flex">
                    <h1>Estoque</h1>
                    <button class="btn-gold" onclick="abrirModalProduto()">+ Novo Produto</button>
                </div>
                <input type="text" id="search-stock" placeholder="Pesquisar no estoque..." onkeyup="filtrarEstoque()">
                <div class="table-container">
                    <table id="stock-table">
                        <thead>
                            <tr>
                                <th>C√≥d</th><th>Produto</th><th>Qtd</th><th>Compra</th><th>Venda</th><th>Desc</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <div id="view-ponto" class="view">
                <h1>Folha de Ponto</h1>
                <div class="clock-container">
                    <div id="digital-clock">00:00:00</div>
                    <div id="date-display">--/--/----</div>
                </div>
                <div class="ponto-controls">
                    <select id="ponto-type">
                        <option value="Entrada">Entrada</option>
                        <option value="Sa√≠da Almo√ßo">Sa√≠da Almo√ßo</option>
                        <option value="Volta Almo√ßo">Volta Almo√ßo</option>
                        <option value="Sa√≠da">Sa√≠da</option>
                    </select>
                    <button class="btn-gold large" onclick="baterPonto()">BATER PONTO</button>
                </div>
            </div>

            <div id="view-loja" class="view">
                <div class="header-flex">
                    <h1>Minha Loja</h1>
                    <button class="btn-gold" onclick="editarLoja()">Salvar Altera√ß√µes</button>
                </div>
                <div class="loja-grid">
                    <div class="card">
                        <h3>Endere√ßo</h3>
                        <input type="text" id="lj-nome" placeholder="Nome Loja">
                        <input type="text" id="lj-rua" placeholder="Rua">
                        <input type="text" id="lj-num" placeholder="N√∫mero">
                        <input type="text" id="lj-bairro" placeholder="Bairro">
                        <input type="text" id="lj-cidade" placeholder="Cidade">
                        <input type="text" id="lj-cep" placeholder="CEP">
                    </div>
                    <div class="card">
                        <h3>Despesas Mensais Fixas</h3>
                        <label>√Ågua:</label> <input type="number" id="lj-agua">
                        <label>Luz:</label> <input type="number" id="lj-luz">
                        <label>Internet:</label> <input type="number" id="lj-net">
                        <label>Aluguel:</label> <input type="number" id="lj-aluguel">
                        <label>Embalagens:</label> <input type="number" id="lj-emb">
                        <label>Funcion√°rios:</label> <input type="number" id="lj-func">
                        <label>Gerais:</label> <input type="number" id="lj-geral">
                    </div>
                </div>
            </div>

        </main>
    </section>

    <div id="modal-produto" class="modal hidden">
        <div class="modal-content">
            <span class="close" onclick="fecharModalProduto()">&times;</span>
            <h2>Adicionar Produto</h2>
            <input type="text" id="new-prod-id" readonly placeholder="C√≥digo Auto">
            <input type="text" id="new-prod-name" placeholder="Nome do Produto">
            <input type="number" id="new-prod-qty" placeholder="Quantidade">
            <input type="number" id="new-prod-buy" placeholder="Pre√ßo Compra">
            <input type="number" id="new-prod-sell" placeholder="Pre√ßo Venda">
            <input type="text" id="new-prod-desc" placeholder="Descri√ß√£o">
            <button class="btn-gold" onclick="salvarNovoProduto()">Salvar</button>
        </div>
    </div>
    
    <div id="modal-vendas" class="modal hidden">
        <div class="modal-content large">
            <span class="close" onclick="fecharModalVendas()">&times;</span>
            <h2>Hist√≥rico de Vendas</h2>
            <input type="text" id="search-sales-hist" placeholder="Filtrar por CPF, Cod, Cliente..." onkeyup="filtrarHistoricoVendas()">
            <div class="table-container">
                <table id="sales-history-table">
                    <thead><tr><th>Data</th><th>Cliente</th><th>Prod</th><th>Total</th></tr></thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
